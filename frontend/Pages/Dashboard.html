<!-- ============================================
     LearnHub - Dashboard Page (Dashboard.html)
     ============================================
     This is the main dashboard page for LearnHub student management system.
     It displays an overview of system statistics and recent student activities.

     Features:
     - Navigation bar with active dashboard state
     - Statistics cards showing key metrics
     - Recent students section with dynamic content
     - Bootstrap responsive layout
     - Font Awesome icons for visual elements
     - JavaScript for delete functionality and notifications

     Dependencies:
     - Bootstrap 5.1.3 for layout and components
     - Font Awesome 6.0.0 for icons
     - Custom CSS (styles.css) for styling
     - Custom JavaScript (scripts.js) for interactions

     Template Variables:
     - total_students: Dynamic count of total students
     - recent_students: List of recently added/modified students
     ============================================ -->

<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- Document metadata and character encoding -->
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>LearnHub - Dashboard</title>

    <!-- Favicon -->
    <link
      rel="icon"
      href="{{ url_for('static', filename='images/LearnHub.png') }}"
      type="image/png"
    />
    <!-- External CSS Dependencies -->
    <!-- Font Awesome for icons used in navigation and content -->
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"
    />
    <!-- Bootstrap for responsive layout and components -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <!-- Custom CSS for dashboard-specific styling -->
    <link
      rel="stylesheet"
      href="{{ url_for('static', filename='styles.css') }}"
    />
  </head>
  <body>
    <!-- ============================================
         NAVIGATION BAR
         ============================================
         Main navigation header with LearnHub branding and menu items.
         Dashboard link is marked as active to show current page.
         ============================================ -->
    <nav class="navbar navbar-expand-lg navbar-light">
      <div class="container">
        <!-- Brand logo and link to home -->
        <a class="navbar-brand" href="/">
          <i class="fas fa-graduation-cap me-2"></i> LearnHub
        </a>
        <!-- Mobile menu toggle button -->
        <button
          class="navbar-toggler"
          type="button"
          data-bs-toggle="collapse"
          data-bs-target="#navbarNav"
        >
          <span class="navbar-toggler-icon"></span>
        </button>
        <!-- Navigation menu items -->
        <div class="collapse navbar-collapse" id="navbarNav">
          <ul class="navbar-nav ms-auto">
            <!-- Home link -->
            <li class="nav-item">
              <a class="nav-link" href="/">
                <i class="fas fa-home me-1"></i> Home
              </a>
            </li>
            <!-- Dashboard link (active) -->
            <li class="nav-item">
              <a class="nav-link active" href="dashboard">
                <i class="fas fa-tachometer-alt me-1"></i> Dashboard
              </a>
            </li>
            <!-- Add Student link -->
            <li class="nav-item">
              <a class="nav-link" href="add">
                <i class="fas fa-user-plus me-1"></i> Add
              </a>
            </li>
            <!-- View Students link -->
            <li class="nav-item">
              <a class="nav-link" href="view">
                <i class="fas fa-users me-1"></i> View
              </a>
            </li>
            <!-- Search Students link -->
            <li class="nav-item">
              <a class="nav-link" href="search">
                <i class="fas fa-search me-1"></i> Search
              </a>
            </li>
          </ul>
        </div>
      </div>
    </nav>

    <!-- ============================================
         MAIN DASHBOARD CONTENT
         ============================================
         Container for dashboard statistics and recent activity.
         Uses Bootstrap grid system for responsive layout.
         ============================================ -->
    <div class="container mt-4">
      <!-- Page title -->
      <h2 class="mb-4">Dashboard</h2>

      <!-- ============================================
           STATISTICS CARDS SECTION
           ============================================
           Row of cards displaying key performance indicators.
           Cards show total students, new students, graduation rate, and attendance.
           ============================================ -->
      <div class="row">
        <!-- Total Students Card -->
        <div class="col-md-3">
          <div class="stat-card pulse">
            <i class="fas fa-users"></i>
            <div class="stat-value">{{ total_students }}</div>
            <div class="stat-label">Total Students</div>
          </div>
        </div>
        <!-- New Students This Month Card -->
        <div class="col-md-3">
          <div class="stat-card">
            <i class="fas fa-user-plus"></i>
            <div class="stat-value">15</div>
            <div class="stat-label">New This Month</div>
          </div>
        </div>
        <!-- Graduation Rate Card -->
        <div class="col-md-3">
          <div class="stat-card">
            <i class="fas fa-graduation-cap"></i>
            <div class="stat-value">89%</div>
            <div class="stat-label">Graduation Rate</div>
          </div>
        </div>
        <!-- Attendance Rate Card -->
        <div class="col-md-3">
          <div class="stat-card">
            <i class="fas fa-chart-line"></i>
            <div class="stat-value">92%</div>
            <div class="stat-label">Attendance Rate</div>
          </div>
        </div>
      </div>

      <!-- ============================================
           RECENT STUDENTS SECTION
           ============================================
           Card displaying recently added or modified students.
           Shows student details, courses, and action buttons.
           ============================================ -->
      <div class="card mt-4">
        <div class="card-header">
          <h4 class="section-title">Recent Students</h4>
        </div>
        <div class="card-body">
          <!-- Dynamic Student Items -->
          {% if recent_students %}
          <!-- Loop through recent students and display each -->
          {% for student in recent_students %}
          <div class="student-item">
            <div class="d-flex justify-content-between align-items-center">
              <div>
                <!-- Student name and ID -->
                <h5 class="mb-0">{{ student.name }}</h5>
                <span class="student-id">ID: {{ student.student_id }}</span>
                <!-- Activity type badge (Added/Modified) -->
                <span
                  class="badge bg-{{ 'success' if student.activity_type == 'Added' else 'warning' }} ms-2"
                >
                  {{ student.activity_type }}
                </span>
              </div>
              <!-- Action buttons for each student -->
              <div class="action-buttons">
                <a
                  href="/view_student/{{ student.id }}"
                  class="btn btn-sm btn-outline-primary"
                  >View</a
                >
                <a
                  href="/edit_student/{{ student.id }}"
                  class="btn btn-sm btn-info"
                  >Edit</a
                >
                <button
                  class="btn btn-sm btn-danger delete-btn"
                  data-student-id="{{ student.id }}"
                >
                  Delete
                </button>
              </div>
            </div>
            <!-- Student email -->
            <p class="mt-2 mb-1"><strong>Email:</strong> {{ student.email }}</p>
            <!-- Student courses -->
            <div>
              <strong>Courses:</strong>
              {% if student.courses and student.courses != 'No courses' %}
              <!-- Display courses as tags -->
              {% for course in student.courses.split(', ') %}
              <span class="course-tag">{{ course }}</span>
              {% endfor %} {% else %}
              <!-- No courses message -->
              <span class="text-muted">No courses assigned</span>
              {% endif %}
            </div>
            <!-- Activity timestamp -->
            <small class="text-muted">
              Last {{ student.activity_type.lower() }}: {{ student.activity_date
              }}
            </small>
          </div>
          {% endfor %} {% else %}
          <!-- Empty state when no students exist -->
          <div class="text-center text-muted py-4">
            <i class="fas fa-users fa-3x mb-3"></i>
            <p>
              No students found. <a href="/add">Add your first student</a> to
              get started.
            </p>
          </div>
          {% endif %}
        </div>
      </div>
    </div>

    <!-- ============================================
         NOTIFICATION ELEMENT
         ============================================
         Toast notification system for user feedback.
         Used for success messages, errors, and confirmations.
         ============================================ -->
    <div id="notification" class="notification">
      <div class="d-flex align-items-center">
        <i class="fas fa-check-circle"></i>
        <span id="notification-message"></span>
      </div>
    </div>

    <!-- ============================================
         FOOTER SECTION
         ============================================
         Site footer with copyright, social links, and developer credits.
         ============================================ -->
    <footer class="footer">
      <div class="footer-content">
        <p>&copy; 2025 LearnHub| All Rights Reserved</p>
        <div class="social-icons">
          <a href="#"><i class="fab fa-twitter"></i></a>
          <a href="#"><i class="fab fa-linkedin"></i></a>
          <a href="#"><i class="fab fa-instagram"></i></a>
        </div>
        <p>@Paul Mulilo And The LearnHub Team</p>
      </div>
    </footer>

    <!-- ============================================
         SCRIPTS SECTION
         ============================================
         JavaScript libraries and custom functionality.
         Includes Bootstrap JS, custom scripts, and dashboard initialization.
         ============================================ -->
    <!-- Bootstrap JavaScript for interactive components -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <!-- Custom JavaScript for dashboard functionality -->
    <script src="{{ url_for('static', filename='scripts.js') }}"></script>
    <script>
      // ============================================
      // DASHBOARD JAVASCRIPT INITIALIZATION
      // ============================================
      // Initialize dashboard-specific functionality when DOM is loaded
      document.addEventListener("DOMContentLoaded", function () {
        setupDeleteButtons(); // Set up delete button functionality
        setupNotification(); // Initialize notification system
      });
    </script>
  </body>
</html>
